{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createGalleryMarkup(array) {\n    return array\n        .map(({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => `\n    <li class=\"gallery-card\">\n        <a class=\"card-link\" href=\"${largeImageURL}\">\n            <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n        <ul class=\"card-description\">\n            <li><p class=\"name\">Likes</p>\n            <p class=\"value\">${likes}</p></liss=>\n            <li><p class=\"name\">Views</p>\n            <p class=\"value\">${views}</p></li>\n            <li><p class=\"name\">Comments</p>\n            <p class=\"value\">${comments}</p></li>\n            <li><p class=\"name\">Downloads</p>\n            <p class=\"value\">${downloads}</p></li>\n        </ul>\n    </li>\n    `)\n        .join('');\n}\n","import axios from 'axios';\n\nexport async function fetchRequest(inputValue, currentPage) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '43226276-a07a0c17e428cfffb021b9b05';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: inputValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: currentPage,\n    });\n\n    try {\n        const response = await axios.get(`${BASE_URL}?${params.toString()}`);\n        return response.data;\n    } catch (error) {\n        throw new Error('Request failed with status:' + error.response.status);\n    };\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { createGalleryMarkup } from './js/render-functions';\nimport { fetchRequest } from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nlet inputValue;\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\nconst gallery = document.querySelector('.gallery');\nconst loadButton = document.querySelector('.load-button');\nloadButton.style.display = 'none';\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nlet currentPage = 1;\nconst itemsPerPage = 15;\n\nform.addEventListener('submit', handleSubmit);\nloadButton.addEventListener('click', loadNextPage);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    inputValue = input.value.trim();\n    loader.style.display = 'block';\n    loadButton.style.display = 'none';\n    gallery.innerHTML = '';\n    currentPage = 1;\n    if (inputValue === '') {\n        loader.style.display = 'none';\n        loadButton.style.display = 'none';\n        form.reset();\n        iziToast.info({\n            message: 'Looks like you forgot to fill in the search query...',\n            position: 'topRight',\n        });\n        return;\n    }\n    try {\n        const data = await fetchRequest(inputValue, currentPage);\n        loader.style.display = 'none';\n        if (data.totalHits === 0) {\n            form.reset();\n            iziToast.error({\n                message:\n                    'Sorry, there are no images matching your search query. Please, try again!',\n                position: 'topRight',\n            });\n        } else if (data.totalHits <= itemsPerPage) {\n            gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n            loadButton.style.display = 'none';\n            lightbox.refresh();\n            form.reset();\n        } else {\n            gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n            loadButton.style.display = 'block';\n            lightbox.refresh();\n            form.reset();\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        lightbox.refresh();\n        form.reset();\n        iziToast.error({\n            message:\n                'Oops! Something went wrong... Please, try again!',\n            messageColor: '#fafafb',\n            messageSize: '16px',\n            messageLineHeight: '1.5',\n            backgroundColor: '#ef4040',\n            position: 'topRight',\n        });\n    }\n}\n\nasync function loadNextPage(event) {\n    event.preventDefault();\n    currentPage++;\n    loader.style.display = 'block';\n    try {\n        const data = await fetchRequest(inputValue, currentPage);\n        const totalPages = Math.ceil(data.totalHits / itemsPerPage);\n        gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n\n        const galleryCard = document.querySelector('.gallery-card');\n        const cardHeight = galleryCard.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n        lightbox.refresh();\n        loader.style.display = 'none';\n        if (currentPage === totalPages) {\n            loadButton.style.display = 'none';\n            iziToast.info({\n                message:\n                    `We're sorry, but you've reached the end of search results.`,\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        lightbox.refresh();\n        form.reset();\n        iziToast.error({\n            message:\n                'Oops! Something went wrong... Please, try again!',\n            messageColor: '#fafafb',\n            messageSize: '16px',\n            messageLineHeight: '1.5',\n            backgroundColor: '#ef4040',\n            position: 'topRight',\n        });\n    }\n}"],"names":["createGalleryMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchRequest","inputValue","currentPage","BASE_URL","API_KEY","params","axios","error","form","input","loader","gallery","loadButton","lightbox","SimpleLightbox","itemsPerPage","handleSubmit","loadNextPage","event","iziToast","data","totalPages","cardHeight"],"mappings":"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"}